<!doctype html>
<html>
<head>
	<meta charset="utf-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
	<meta name="format-detection" content="telephone=no">
	<title>poll-add</title>
	<link rel="stylesheet" href="../plugin/seedsui/seedsui.min.css">
	<link rel="stylesheet" href="../plugin/animate/animate.css">
    <link rel="stylesheet" href="../css/poll.css">
</head>

<body ontouchstart="">
    <section id="page_pollWrite">
    	<header>
    		<div class="titlebar">
                <a class="left" href="javascript:back()">
                    <i class="icon icon-arrowleft"></i>
                    <span>返回</span>
                </a>
                <h1 class="text-center">新建投票</h1>
            </div>
    	</header>
    	<article>
    	<form id="form1">
    		<div class="group" id="pollcontent">
                <div class="input-box">
                    <span class="icon" style="background-image:url(../img/poll/icon-tag.png);background-size:contain"></span>
                    <input type="text" placeholder="投票标题" name="topic" data-rule="required">
                </div>
                <hr/>
                <div class="input-box">
                    <i class="icon"></i>
                    <textarea name="description" placeholder="填写描述，150字以内" data-fontcounter="description1" data-rule="required maxlength:150"></textarea>
                </div>
                <div class="input-box box-right">
                    <span data-fontcounter-for="description1"></span>
                    <span><i data-click="uploadPhoto" class="color-placeholder icon icon-pic"></i></span>
                </div>
                <hr/>
                <div class="input-box lineheight0 padding8">
                    <p class="box-flex-1">支持多选</p>
                    <div class="switch reverse notext" data-on="是" data-click="toogleMultiSel" data-on-value="2"  data-off-value="2off" data-off="否">
                        <div class="switch-handle events-none"></div>
                    </div>
                </div>
                <hr/>
                <div class="input-box lrpadding8 underline" style="display:none">
                    <p class="box-flex-1">最多投几项</p>
                    <select name="max" class="rl" style="padding-right:24px;">
                        <option>1</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5</option>
                        <option>6</option>
                        <option>7</option>
                        <option>8</option>
                        <option>9</option>
                        <option>10</option>
                    </select>
                    <i class="icon icon-arrowright color-placeholder"></i>
                </div>
                <div class="row noborder">
                    <div class="dot" style="margin: 10px 20px 10px 24px;"></div>
                    <div class="input-box box-flex-1 underline">
                        <input type="text" name="polltext1" placeholder="输入选项内容" data-click="inputoption" data-rule="required"/>
                        <i class="icon icon-pic color-placeholder" data-click="uploadPhoto"></i>
                        <div class="nowrap" style="width:40px;height:40px;">
                            <a data-click="del" class="button nolrpadding noclick bg-transparent color-tip">
                                <i class="icon icon-rdocancel-fill size24 events-none"></i>
                            </a>
                            <a data-click="delVerify" class="button hide animated fadeInRight nolrpadding noclick bg-tip">
                                <i class="icon icon-trash size24 events-none"></i>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="row noborder">
                    <div class="dot" style="margin: 10px 20px 10px 24px;"></div>
                    <div class="input-box box-flex-1 underline">
                        <input type="text" name="polltext2" placeholder="输入选项内容" data-click="inputoption" data-rule="required"/>
                        <i class="icon icon-pic color-placeholder" data-click="uploadPhoto"></i>
                        <div class="nowrap" style="width:40px;height:40px;">
                            <a data-click="del" class="button nolrpadding noclick bg-transparent color-tip">
                                <i class="icon icon-rdocancel-fill size24 events-none"></i>
                            </a>
                            <a data-click="delVerify" class="button hide animated fadeInRight nolrpadding noclick bg-tip">
                                <i class="icon icon-trash size24 events-none"></i>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="row noborder">
                    <div class="dot" style="margin: 10px 20px 10px 24px;"></div>
                    <div class="input-box box-flex-1 underline">
                        <input type="text" name="polltext3" placeholder="输入选项内容" data-click="inputoption" data-rule="required"/>
                        <i class="icon icon-pic color-placeholder" data-click="uploadPhoto"></i>
                        <div class="nowrap" style="width:40px;height:40px;">
                            <a data-click="del" class="button nolrpadding noclick bg-transparent color-tip">
                                <i class="icon icon-rdocancel-fill size24 events-none"></i>
                            </a>
                            <a data-click="delVerify" class="button hide animated fadeInRight nolrpadding noclick bg-tip">
                                <i class="icon icon-trash size24 events-none"></i>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="input-box text-center" data-click="addPollOption">
                    <a class="input-text events-none">＋添加投票选项</a>
                </div>
            </div>
        </form>
        <a class="button block margin8" onclick="submit()">发送</a>
        <a class="button block outline margin8" onclick="preview()">预览</a>
    	</article>
    </section>
    <section id="page_preview" data-animation="slideLeft" class="page" style="background-color:#f4f4f4;">
    	<header>
    		<div class="titlebar">
                <a class="left" href="javascript:backPrev()">
                    <i class="icon icon-arrowleft"></i>
                    <span>返回</span>
                </a>
                <h1 class="text-center">投票</h1>
            </div>
    	</header>
    	<article>
    		<div class="group">
                <div class="padding12">
                    <p id="topic">公司早餐因该添加什么？</p>
                    <small id="description">要改善伙食了，大家喜欢吃哪个，赶快投吧。</small>
                </div>
                <div id="pollimg0" class="preview"></div>
                <div class="margin12">
                	<small class="color-tip">记名投票(最多选2项)</small>
                	<small class="float-right">33人参与投票</small>
                </div>
            </div>

    		<ul class="grid album" data-col="2" style="background-color:white;" id="selImg">
                <li>
                    <a style="background-image: url(../img/poll/poll1-img1.jpg);">
                        <div class="badge arrow" data-toggle="active">
                            <span class="checkbox" data-toggle="active"></span>
                            <span>吐司</span>
                            <input type="checkbox" class="hide">
                        </div>
                    </a>
                </li>
                <li>
                    <a style="background-image: url(../img/poll/poll1-img2.jpg);">
                        <div class="badge arrow" data-toggle="active">
                            <span class="checkbox" data-toggle="active"></span>
                            <span>油条</span>
                            <input type="checkbox" class="hide">
                        </div>
                    </a>
                </li>
                <li>
                    <a style="background-image: url(../img/poll/poll1-img3.jpg);">
                        <div class="badge arrow" data-toggle="active">
                            <span class="checkbox" data-toggle="active"></span>
                            <span>粥</span>
                            <input type="checkbox" class="hide">
                        </div>
                    </a>
                </li>
                <li>
                    <a style="background-image: url(../img/poll/poll1-img4.jpg);">
                        <div class="badge arrow" data-toggle="active">
                            <span class="checkbox" data-toggle="active"></span>
                            <span>三明治</span>
                            <input type="checkbox" class="hide">
                        </div>
                    </a>
                </li>
            </ul>
    		<a class="button block margin8">投票</a>
    	</article>
    </section>
    <script src="../plugin/seedsui/seedsui.min.js"></script>
    <!--Exmobi能力-->
    <!--<script src="../plugin/exmobi/exmobi.js"></script>-->
    <!--投票-->
    <script src="../js/poll.js"></script>
    <script>
    	//表单提交验证
    	var f=new Form("#form1");
        //提交
        function submit(){
            f.validate();
        }
        //预览
        var singlePage=new Page();
        function preview(){
            if(f.validate()){
                singlePage.open("#page_preview");
            }
        }
    	//返回
        function backPrev(){
            singlePage.back();
        }
    	//数字计数器
        function listenerFontcount(){
            var fc=new CountVals({
                "onInput":function(e){
                    //console.log("输入中");
                },
                "onInputOut":function(e){
                    //console.log("超过数字限制时");
                    var input=e.target;
                    input.forField.innerHTML=Math.round(input.maxlength-input.value.length);
                    input.forField.classList.add("color-tip");
                },
                "onInputIn":function(e){
                    //console.log("没有超过数字限制时");
                    var input=e.target;
                    input.forField.innerHTML="";
                    input.forField.classList.remove("color-tip");
                }
            });
        }
        listenerFontcount();
    	
    	//定义exmobi返回
    	function back(){history.go(-1)}
    </script>
</body>
</html>