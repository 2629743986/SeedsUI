<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
    <meta name="format-detection" content="telephone=no">
	<title>poll-result-font</title>
	<link rel="stylesheet" href="../plugin/seedsui/seedsui.min.css">
	<link rel="stylesheet" href="../css/poll.css">
</head>
<body ontouchstart="">
		<header>
			<div class="titlebar">
                <a class="titlebar-button left" href="javascript:back()">
                    <i class="icon icon-arrowleft"></i>
                    <span>返回</span>
                </a>
                <h1 class="text-center">投票结果</h1>
            </div>
		</header>
		<article>
            <div class="group">
                <div class="padding8">
                    <p>周五出去玩要去哪里？</p>
                    <small>周五要部门活动了大家投票看看要去哪里做什么。</small>
                </div>
                <div class="box" style="background-color:#ebe8e3">
                    <div class="box-flex-1 padding8 text-center">
                        <img src="../img/poll/icon-crown.png" class="crown">
                        <strong class="block margin8">爬紫金山</strong>
                        <div class="progress-bar radius8">
                            <span class="progress" style="width: 55%"></span>
                            <span class="text center">5/12</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="group">
                <div class="padding8 underline">
                    <span>投票详情</span>
                    <a class="float-right" onclick="toggleCharts(this)">
                        <i class="icon icon-chartpie-fill"></i>
                    </a>
                </div>
                <!--柱状图-->
                <div id="barcharts" style="display: block;">
                    <div class="progress-bar bg-white " style="height:54px;">
                        <span class="progress bg-odd" style="width:55%;"></span>
                        <span class="text color-placeholder right">
                            <span class="counter" data-duration="1000" data-to="5">5</span>
                            <span>/12</span>
                        </span>
                        <span class="text left color-default">爬紫金山</span>
                    </div>
                    <hr/>
                    <div class="progress-bar bg-white " style="height:54px;">
                        <span class="progress bg-even" style="width:17%;"></span>
                        <span class="text right color-placeholder">
                            <span class="counter" data-duration="1000" data-to="2">2</span>
                            <span>/12</span>
                        </span>
                        <span class="text left color-default">去唱歌</span>
                    </div>
                    <hr/>
                    <div class="progress-bar bg-white " style="height:54px;">
                        <span class="progress bg-odd" style="width:17%"></span>
                        <span class="text right color-placeholder">
                            <span class="counter" data-duration="1000" data-to="2">2</span>
                            <span>/12</span>
                        </span>
                        <span class="text left color-default">去夫子庙</span>
                    </div>
                    <hr/>
                    <div class="progress-bar bg-white " style="height:54px;">
                        <span class="progress bg-even" style="width:30%"></span>
                        <span class="text right color-placeholder">
                            <span class="counter" data-duration="1000" data-to="3">3</span>
                            <span>/12</span>
                        </span>
                        <span class="text left color-default">去吃火锅</span>
                    </div>
                </div>
                <!--饼图-->
                <div id="piecharts"  class="pie-chart" style="display: none;">
                    <ul class="grid" data-col="2">
                        <li class="doughnutblock text-center">
                            <div class="doughnutblock-canvas">
                                <canvas id="chart1" width="140" height="140"/>
                            </div>
                            <div class="doughnutblock-overlay box box-middlecenter">
                                <div>
                                    <p class="percent">54.6%</p>
                                    <p>18/33</p>
                                </div>
                            </div>
                            <label style="">爬紫金山</label>
                        </li>
                        <li class="doughnutblock text-center">
                            <div class="doughnutblock-canvas" style="background-color:#fff;">
                                <canvas id="chart2" width="140" height="140"/>
                            </div>
                            <div class="doughnutblock-overlay box box-middlecenter">
                                <div>
                                    <p class="percent">15.2</p>
                                    <p>5/33</p>
                                </div>
                            </div>
                            <label style="">去唱歌</label>
                        </li>
                        <li class="doughnutblock text-center">
                            <div class="doughnutblock-canvas" style="background-color:#fff;">
                                <canvas id="chart3" width="140" height="140"/>
                            </div>
                            <div class="doughnutblock-overlay box box-middlecenter">
                                <div>
                                    <p class="percent">24.2%</p>
                                    <p>8/33</p>
                                </div>
                            </div>
                            <label style="">去夫子庙</label>
                        </li>
                        <li class="doughnutblock text-center">
                            <div class="doughnutblock-canvas" style="background-color:#fff;">
                                <canvas id="chart4" width="140" height="140"/>
                            </div>
                            <div class="doughnutblock-overlay box box-middlecenter">
                                <div>
                                    <p class="percent">6%</p>
                                    <p>2/33</p>
                                </div>
                            </div>
                            <label style="">去吃火锅</label>
                        </li>
                    </ul>
                </div>
            </div>
			<ul class="list noclick">
				<li class="between">
					<div class="justify">
                        <div class="photo" style="background-image:url(../img/poll/tx1.jpg)"></div>
                    </div>
					<div class="justify-content">
						<p>Cindy</p>
						<small class="absolute" style="top:12px;right:4px;">于2016-02-28截止</small>
						<small>
							创建:2016-01-01
						</small>
					</div>
				</li>
			</ul>
		</article>
    <script src="../plugin/seedsui/seedsui.min.js"></script>
    <!--chartJs-->
    <script src="../plugin/charts/Chart.min.js"></script>
    <!--Exmobi能力-->
    <!--<script src="../plugin/exmobi/exmobi.js"></script>-->
    <!--投票-->
    <script src="../js/poll.js"></script>
    <script type="text/javascript">
        //饼状图参数
        var colors={fillColor:["#53c6fd","#ffae02","#3ae3ea","#ff6f36","#cf7af3","#4cd32e","#4587f7","#00c2eb","#ff618f","#21d9a1"],default:"#ebe8e3"};
        var values=[18,5,18,2];
        var doughnutConfig={
            segmentShowStroke:false,
            showTooltips:false,
            animationEasing : "easeOut",
            animationSteps:30,
            percentageInnerCutout:80
        }
        var doughnutData1 = [
            {
                value:values[0],
                color:colors.fillColor[0],
            },
            {
                value:values[1],
                color:colors.default,
            },
            {
                value:values[2],
                color:colors.default,
            },
            {
                value:values[3],
                color:colors.default,
            },
        ];
        var doughnutData2 = [
            {
                value:values[0],
                color:colors.default,
            },
            {
                value:values[1],
                color:colors.fillColor[1],
            },
            {
                value:values[2],
                color:colors.default,
            },
            {
                value:values[3],
                color:colors.default,
            },
        ];
        var doughnutData3 = [
            {
                value:values[0],
                color:colors.default,
            },
            {
                value:values[1],
                color:colors.default,
            },
            {
                value:values[2],
                color:colors.fillColor[2],
            },
            {
                value:values[3],
                color:colors.default,
            },
        ];
        var doughnutData4 = [
            {
                value:values[0],
                color:colors.default,
            },
            {
                value:values[1],
                color:colors.default,
            },
            {
                value:values[2],
                color:colors.default,
            },
            {
                value:values[3],
                color:colors.fillColor[3],
            },
        ];
        var isCharted=false;
        var piecharts=document.getElementById("piecharts");
        var barcharts=document.getElementById("barcharts");
        function toggleCharts(thisobj){
            var icon=thisobj.querySelector("i");
            if(icon.classList.contains("icon-chartpie-fill")){
                icon.className="icon icon-chartbar-fill";
                piecharts.style.display="block";
                barcharts.style.display="none";
            }else{
                icon.className="icon icon-chartpie-fill";
                piecharts.style.display="none";
                barcharts.style.display="block";
            }
            if(!isCharted)initCharts();
        }
        
        function initCharts(){
            //初始化饼状图
            var ctx1 = document.getElementById("chart1").getContext("2d");
            var doughnut1 = new Chart(ctx1).Doughnut(doughnutData1,doughnutConfig);
            var ctx2 = document.getElementById("chart2").getContext("2d");
            var doughnut2 = new Chart(ctx2).Doughnut(doughnutData2,doughnutConfig);
            var ctx3 = document.getElementById("chart3").getContext("2d");
            var doughnut3 = new Chart(ctx3).Doughnut(doughnutData3,doughnutConfig);
            var ctx4 = document.getElementById("chart4").getContext("2d");
            var doughnut4 = new Chart(ctx4).Doughnut(doughnutData4,doughnutConfig);
            isCharted=true;
        }
		
		function back(){history.go(-1)}
    </script>
</body>
</html>